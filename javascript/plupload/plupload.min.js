(function(){var b=0,g=[],i={},e={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},h=/[<>&\"\']/g;function d(){this.returnValue=false}function f(){this.cancelBubble=true}(function(j){var k=j.split(/,/),l,n,m;for(l=0;l<k.length;l+=2){m=k[l+1].split(/ /);for(n=0;n<m.length;n++){e[m[n]]=k[l]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/x-flv,flv,video/vnd.rn-realvideo,rv,text/plain,asc txt text diff log,application/octet-stream,exe");var c={STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,mimeTypes:e,extend:function(j){c.each(arguments,function(k,l){if(l>0){c.each(k,function(n,m){j[m]=n})}});return j},cleanName:function(j){var k,l;l=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(k=0;k<l.length;k+=2){j=j.replace(l[k],l[k+1])}j=j.replace(/\s+/g,"_");j=j.replace(/[^a-z0-9_\-\.]+/gi,"");return j},addRuntime:function(j,k){k.name=j;g[j]=k;g.push(k);return k},guid:function(){var j=new Date().getTime().toString(32),k;for(k=0;k<5;k++){j+=Math.floor(Math.random()*65535).toString(32)}return(c.guidPrefix||"p")+j+(b++).toString(32)},buildUrl:function(k,j){var l="";c.each(j,function(n,m){l+=(l?"&":"")+escape(m)+"="+escape(n)});if(l){k+=(k.indexOf("?")>0?"&":"?")+l}return k},each:function(n,o){var m,l,k,j;if(n){m=n.length;if(m===l){for(k in n){if(n.hasOwnProperty(k)){if(o(n[k],k)===false){return}}}}else{for(j=0;j<m;j++){if(o(n[j],j)===false){return}}}}},formatSize:function(j){if(j>1048576){return Math.round(j/1048576,1)+" MB"}if(j>1024){return Math.round(j/1024,1)+" KB"}return j+" b"},getPos:function(k,o){var p=0,n=0,r,q=document,l,m;k=k;o=o||q.body;function j(v){var t,u,s=0,w=0;if(v){u=v.getBoundingClientRect();t=q.compatMode==="CSS1Compat"?q.documentElement:q.body;s=u.left+t.scrollLeft;w=u.top+t.scrollTop}return{x:s,y:w}}if(k.getBoundingClientRect&&(navigator.userAgent.indexOf("MSIE")>0&&q.documentMode!==8)){l=j(k);m=j(o);return{x:l.x-m.x,y:l.y-m.y}}r=k;while(r&&r!=o&&r.nodeType){p+=r.offsetLeft||0;n+=r.offsetTop||0;r=r.offsetParent}r=k.parentNode;while(r&&r!=o&&r.nodeType){p-=r.scrollLeft||0;n-=r.scrollTop||0;r=r.parentNode}return{x:p,y:n}},getSize:function(j){return{w:j.clientWidth||j.offsetWidth,h:j.clientHeight||j.offsetHeight}},parseSize:function(j){var k;if(typeof(j)=="string"){j=/^([0-9]+)([mgk]+)$/.exec(j.toLowerCase().replace(/[^0-9mkg]/g,""));k=j[2];j=+j[1];if(k=="g"){j*=1073741824}if(k=="m"){j*=1048576}if(k=="k"){j*=1024}}return j},xmlEncode:function(j){return j?(""+j).replace(h,function(k){return a[k]?"&"+a[k]+";":k}):j},toArray:function(l){var k,j=[];for(k=0;k<l.length;k++){j[k]=l[k]}return j},addI18n:function(j){return c.extend(i,j)},translate:function(j){return i[j]||j},addEvent:function(k,j,l){if(k.attachEvent){k.attachEvent("on"+j,function(){var m=window.event;if(!m.target){m.target=m.srcElement}m.preventDefault=d;m.stopPropagation=f;l(m)})}else{if(k.addEventListener){k.addEventListener(j,l,false)}}}};c.Uploader=function(m){var k={},p,o=[],q,l;p=new c.QueueProgress();m=c.extend({chunk_size:0,max_file_size:"1gb",multi_selection:true,filters:[{title:"Image files",extensions:"jpg,gif,png"}]},m);function n(){var r;if(this.state==c.STARTED&&q<o.length){r=o[q++];if(r.status==c.QUEUED){this.trigger("UploadFile",r)}else{n.call(this)}}else{this.stop()}}function j(){var r;p.reset();for(r=0;r<o.length;r++){p.size+=o[r].size;p.loaded+=o[r].loaded;if(o[r].status==c.DONE){p.uploaded++}else{if(o[r].status==c.FAILED){p.failed++}else{p.queued++}}}p.percent=p.size>0?Math.ceil(p.loaded/p.size*100):0;p.bytesPerSec=Math.ceil(p.loaded/((+new Date()-l||1)/1000))}c.extend(this,{state:c.STOPPED,features:{},files:o,settings:m,total:p,id:c.guid(),init:function(){var w=this,x,t,s,v=0,u;m.page_url=m.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(m.url)){m.url=m.page_url+m.url}m.chunk_size=c.parseSize(m.chunk_size);m.max_file_size=c.parseSize(m.max_file_size);w.bind("FilesAdded",function(y,B){var A,z,C=0;for(A=0;A<B.length;A++){z=B[A];z.loaded=0;z.percent=0;z.status=c.QUEUED;if(B[A].size<=m.max_file_size){o.push(z);C++}}if(C){w.trigger("QueueChanged");w.refresh()}});if(m.unique_names){w.bind("UploadFile",function(y,z){z.target_name=z.id+".tmp"})}w.bind("UploadProgress",function(y,z){if(z.status==c.QUEUED){z.status=c.UPLOADING}z.percent=z.size>0?Math.ceil(z.loaded/z.size*100):0;j()});w.bind("StateChanged",function(y){if(y.state==c.STARTED){l=(+new Date())}});w.bind("QueueChanged",j);w.bind("Error",function(y,z){if(z.file){z.file.status=c.FAILED;j();window.setTimeout(function(){n.call(w)})}});w.bind("FileUploaded",function(y,z){z.status=c.DONE;y.trigger("UploadProgress",z);n.call(w)});if(m.runtimes){t=[];u=m.runtimes.split(/\s?,\s?/);for(x=0;x<u.length;x++){if(g[u[x]]){t.push(g[u[x]])}}}else{t=g}function r(){var y=t[v++];if(y){y.init(w,function(z){if(z&&z.success){w.trigger("Init",{runtime:y.name});w.trigger("PostInit");w.refresh()}else{r()}})}else{w.trigger("Error",{code:c.INIT_ERROR,message:"Init error."})}}r()},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=c.STARTED){q=0;this.state=c.STARTED;this.trigger("StateChanged");n.call(this)}},stop:function(){if(this.state!=c.STOPPED){this.state=c.STOPPED;this.trigger("StateChanged")}},getFile:function(s){var r;for(r=o.length-1;r>=0;r--){if(o[r].id===s){return o[r]}}},removeFile:function(s){var r;for(r=o.length-1;r>=0;r--){if(o[r].id===s.id){return this.splice(r,1)[0]}}},splice:function(t,r){var s;s=o.splice(t,r);this.trigger("FilesRemoved",s);this.trigger("QueueChanged");return s},trigger:function(s){var u=k[s.toLowerCase()],t,r;if(u){r=Array.prototype.slice.call(arguments);r[0]=this;for(t=0;t<u.length;t++){if(u[t].func.apply(u[t].scope,r)===false){return false}}}return true},bind:function(r,t,s){var u;r=r.toLowerCase();u=k[r]||[];u.push({func:t,scope:s||this});k[r]=u},unbind:function(r,t){var u=k[r.toLowerCase()],s;if(u){for(s=u.length-1;s>=0;s--){if(u[s].func===t){u.splice(s,1)}}}}})};c.File=function(m,k,l){var j=this;j.id=m;j.name=k;j.size=l;j.loaded=0;j.percent=0;j.status=0};c.Runtime=function(){this.init=function(j,k){}};c.QueueProgress=function(){var j=this;j.size=0;j.loaded=0;j.uploaded=0;j.failed=0;j.queued=0;j.percent=0;j.bytesPerSec=0;j.reset=function(){j.size=j.loaded=j.uploaded=j.failed=j.queued=j.percent=j.bytesPerSec=0}};c.runtimes={};window.plupload=c})();